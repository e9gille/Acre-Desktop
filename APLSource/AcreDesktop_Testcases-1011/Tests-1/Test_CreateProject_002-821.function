 R←Test_CreateProject_002(stopFlag batchFlag);⎕TRAP;path;rc;en;more;projectPath;ref;projectName;result;list;errMsg;dmx;a
⍝ Tries to create a project on an invalid path.
 ⎕TRAP←(999 'C' '. ⍝ Deliberate error')(0 'N')

 :If 'Win'≢A.GetOperatingSystem ⍬
     R←∆WindowsOnly
 :Else
     R←∆Failed

     projectName←⊃⎕SI
     projectPath←'QWE:/This_does_almost_certainly_Not_Exist/aa/bb/cc/dd'
     #.⎕SHADOW projectName
     ref←⍎projectName #.⎕NS''
     ref.⎕FX'r←Hello' 'r←''World'''

     :Trap 0
         result←⎕SE.UCMD'acre.Createproject ',projectPath,' #.',projectName ⍝,' -messages=off'
         →FailsIf 1
     :Else
         a←1
         dmx←⎕DMX
     :EndTrap
     →PassesIf~0∊⍴dmx.DM
     errMsg←1⊃dmx.DM
     →PassesIf∨/'FILE NAME ERROR'⍷errMsg~⎕UCS 8
     R←∆OK

 :EndIf
